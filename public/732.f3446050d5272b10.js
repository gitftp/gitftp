"use strict";(self.webpackChunkng=self.webpackChunkng||[]).push([[732],{7732:(y,p,i)=>{i.r(p),i.d(p,{GitAccountsCreateModule:()=>x});var l=i(6895),r=i(4006),e=i(4650),f=i(1458),h=i(1491),u=i(4859),s=i(9549),d=i(4144),m=i(4385),g=i(3238);function v(o,a){if(1&o&&(e.TgZ(0,"mat-option",10),e._uU(1),e.qZA()),2&o){const t=a.$implicit;e.Q6J("value",t.provider_id),e.xp6(1),e.Oqu(t.provider_name)}}function C(o,a){if(1&o&&(e.TgZ(0,"mat-form-field",3)(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",11),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Oqu((null==t.labels?null:t.labels.label1)||"Client ID")}}function A(o,a){if(1&o&&(e.TgZ(0,"mat-form-field",12)(1,"mat-label"),e._uU(2),e.qZA(),e._UZ(3,"input",13),e.qZA()),2&o){const t=e.oxw();e.xp6(2),e.Oqu((null==t.labels?null:t.labels.label2)||"Client Secret")}}let Z=(()=>{class o{constructor(t,n,c){this.helper=t,this.apiService=n,this.fb=c,this.connecting=!1,this.providers=[],this.gettingProviders=!1,this.labels={},this.form=this.fb.group({provider_id:["",[r.kI.required]],client_id:["cead9661bec124b3afc6",[r.kI.required]],client_secret:["d3ba872e5c069fc91e3b7c7976492d5f7c94a81e",[r.kI.required]]})}ngOnInit(){this.getProviders(),this.helper.setPage("git-accounts")}connect(){this.connecting=!0,this.apiService.post("oauth/save-oauth-app",this.form.value).subscribe({next:t=>{if(this.connecting=!1,console.log(t),t.status){let n=this.helper.getUser();window.open(t.data.public_domain+"api/connect?me="+this.helper.encode(t.data.app_id)+"&token="+n.token,"_empty_")}else this.helper.alertError(t)},error:t=>{this.connecting=!1,this.helper.alertError(t)}})}providerChanged(){console.log("what"),console.log(this.form.value);let t=this.form?.get("provider_id")?.value;for(let n of this.providers)console.log(t),n.provider_id==t&&(this.labels.label1=n.provider_param_1_name,this.labels.label2=n.provider_param_2_name,console.log(n),this.selectedProvider=n)}getProviders(){this.gettingProviders=!0,this.apiService.post("oauth/all-providers",{}).subscribe({next:t=>{console.log(t),t.status?this.providers=t.data.providers:this.helper.alert({message:t.message,exception:t.exception,type:"Error"})},error:t=>{this.helper.alert({message:t,type:"Error"})}})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(f.W),e.Y36(h.s),e.Y36(r.qu))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-git-accounts-create"]],decls:26,vars:6,consts:[[2,"height","15px"],[1,"page"],[3,"formGroup"],["appearance","outline",1,"mr2"],["formControlName","provider_id",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["appearance","outline","class","mr2",4,"ngIf"],["appearance","outline",4,"ngIf"],["ng-if","form.valid"],["type","button","mat-stroked-button","","color","primary",2,"height","69px","padding","0 84px","border-radius","50px",3,"disabled","click"],[3,"value"],["matInput","","formControlName","client_id"],["appearance","outline"],["matInput","","formControlName","client_secret"]],template:function(t,n){1&t&&(e._UZ(0,"div",0),e.TgZ(1,"div",1)(2,"h2"),e._uU(3," Connect git account "),e.qZA(),e.TgZ(4,"p"),e._uU(5," Connect with your account at Github or Bitbucket "),e.qZA(),e.TgZ(6,"h2"),e._uU(7," Step 1 "),e.qZA(),e.TgZ(8,"div")(9,"p"),e._uU(10," Create an OAuth application in your account, this application will be used to login in Accounts. "),e.qZA(),e.TgZ(11,"form",2)(12,"mat-form-field",3)(13,"mat-label"),e._uU(14,"Git provider"),e.qZA(),e.TgZ(15,"mat-select",4),e.NdJ("selectionChange",function(){return n.providerChanged()}),e.YNc(16,v,2,2,"mat-option",5),e.qZA()(),e.YNc(17,C,4,1,"mat-form-field",6),e.YNc(18,A,4,1,"mat-form-field",7),e.qZA()(),e.TgZ(19,"div",8)(20,"h2"),e._uU(21," Step 2 "),e.qZA(),e.TgZ(22,"p"),e._uU(23," Login through the OAuth app you created "),e.qZA(),e.TgZ(24,"button",9),e.NdJ("click",function(){return n.connect()}),e._uU(25),e.qZA()()()),2&t&&(e.xp6(11),e.Q6J("formGroup",n.form),e.xp6(5),e.Q6J("ngForOf",n.providers),e.xp6(1),e.Q6J("ngIf",n.labels.label1),e.xp6(1),e.Q6J("ngIf",n.labels.label1),e.xp6(6),e.Q6J("disabled",n.connecting),e.xp6(1),e.hij("Login to ",null==n.selectedProvider?null:n.selectedProvider.provider_name,""))},dependencies:[l.sg,l.O5,u.lW,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,s.KE,s.hX,d.Nt,m.gD,g.ey],styles:["form[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{vertical-align:top}"]}),o})();var b=i(9299),T=i(7392),G=i(3546);let U=[{path:"git-accounts/create",component:Z}],x=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[l.ez,b.Bz.forChild(U),T.Ps,u.ot,G.QW,r.u5,r.UX,s.lN,d.c,m.LD]}),o})()}}]);