<% if(more == 'false'){ %>
    <% if(s.ready == 0){ %>
        <div class="panel panel-default">
            <div class="panel-body">
                <p class="text-center"><span style="font-size: 1.6em;">Not yet deployed</span>

                    <div class="space10"></div>
                    <i class="fa fa-info"></i> Deploy time will depend on amount of files and number of branches to be deployed.
                    <div class="space10"></div>
                    <% if(s.cloned == 2){ %>
                    <button type="button" class="btn btn-default btn-lg startdeploy" disabled="disabled"><i class="fa fa-spin fa-spinner fa-fw"></i> Deploy in progress</button>
                    <% }else{ %>
                    <button type="button" class="btn btn-success btn-lg startdeploy"><i class="fa fa-coffee fa-fw"></i> Start deploy.</button>
                    <% } %>
                </p>
                
            </div>
        </div>
        <div class="space15"></div>
    <% } %>
<% } %>

<% if(activity.data.length && more == 'false'){ %>
    <div class="project-record-list-wrapper">
<% } %>

    <% $.each(activity.data, function(i, a){ %>
            <div class="project-record-list">

            <%
                switch(a.status){
                case '0':
                var ic = 'ban';
                var co = 'aaa';
                var ct = 'Failed';
                break;
                case '1':
                var ic = 'check';
                var co = '4cd964';
                var ct = 'Successful';
                break;
                case '2':
                var ic = 'spin fa-spinner';
                var co = 'FF9500';
                var ct = 'In progress';
                break;
                case '3':
                var ic = 'pause';
                var co = 'aaa';
                var ct = 'In Queue';
                }

                if(a.commit_message){
                    if(a.commit_message.length > 36){
                        var commit_message = a.commit_message.substr(0, 36)+'...';
                        var commit_message = '<span data-toggle="tooltip" data-placement="top" title="'+a.commit_message+'">'+commit_message+'</span>';
                    }else{
                        var commit_message = '<span>'+a.commit_message+'</span>';
                    }
                }else{
                    var commit_message = '';
                }

                switch(a.record_type){
                case '0': // manually.
                var icon = 'cloud';
                break;
                case '1': // from service.
                var icon = '';
                break;
                case '2': // first time.
                var icon = 'code-fork';
                }
            %>

                    <i class="deploystate-icon fa fa-<%= icon %> fa-fw pull-left"></i>
                    <span class="status status-<%= a.status %>"><%= ct %> | <span class="dynamicTime" data-toggle="tooltip" data-placement="top" title="<%= moment(timestamp(a.date)).format('DD/MM/YYYY hh:mm:ss a') %>" data-timestamp="<%= a.date %>"></span></span>
                    <div class="pull-right link-data">
                        <a href="#" class="watchRawData" data-id="<%= a.id %>" title="View raw console data" data-toggle="tooltip" data-placement="bottom">
                            <i class="fa fa-terminal fa-fw"></i> Log
                        </a>
                        <a href="#" class="watchPayload" data-id="<%= a.id %>" title="View Payload" data-toggle="tooltip" data-placement="top">
                            <i class="fa fa-gear fa-fw"></i> Payload
                        </a>
                    </div>
                <br/>
                    <i class="fa fa-<%= ic %>" data-toggle="tooltip" data-placement="right" title="<%= ct %>" style="color: #<%= co %> "></i>&nbsp;&nbsp; <i class="fa fa-leaf green"></i> <span class="blue"><%= a.branch[0]['name'] %></span> <small><%= (a.record_type == 2) ? ' (First deploy)' : '' %></small>
                    <% if(a.hash_before == null && a.hash == null){ %>

                    <% }else if(a.hash_before == a.hash){ %>
                        &nbsp;&nbsp;<code>No files changed</code>
                    <% }else{ %>
                        &nbsp;&nbsp;<code><%= (a.hash_before) ? a.hash_before.substr(0, 6) : '' %><%= (a.hash_before) ? '->' : '' %><%= (a.hash) ? a.hash.substr(0, 6) : '' %></code>
                    <% } %>
                    <strong class="pull-right">deployed <%= a.amount_deployed %></strong>
                <br/>
                    <%= (a.avatar_url)? '<img src="'+a.avatar_url+'&s=20"/>' : '' %>
                    <% if(a.record_type == 1){ %>
                        <strong><%= a.triggerby %> </strong>
                    <% }else{ %>
                        <strong>Triggered manually by: You </strong>
                    <% } %>
                    <%= (a.commit_count) ? 'pushed '+a.commit_count+' commit(s) ' : '' %>
                    <div class="pull-right">
                        <span class="green" data-toggle="tooltip" data-placement="left" title="Added/Modified"><i class="fa fa-plus-circle" ></i> <%= a.file_add %></span> &nbsp;
                        <span class="gray" data-toggle="tooltip" data-placement="left" title="Removed"><i class="fa fa-minus-circle"></i> <%= a.file_remove %></span>
                    </div>
                <br/>
                    <%= commit_message %>
                    <% (a.hash) ? ' <code>'+a.hash.substr(0, 6)+'</code>' : '' %>
            </div>

    <% }); %>

    <% if(count > renderedCount){ %>
        <button type="button" class="btn btn-default btn-block activity-data-records-view-more">View more</button>
    <% } %>

    <script>
        $('[data-toggle="tooltip"]').tooltip();
    </script>

<% if(more == 'false'){ %>
    <% if(activity.data.length){ %>
    </div>
    <% } %>
    <br>
    <br>
<% } %>
