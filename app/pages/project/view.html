<div>
    <div class="container-fluid">
        <div class="row">
            <div class="col-md-3">
                <div project-sidebar page="page"></div>
            </div>
            <div>
                <div class="col-md-9">
                    <div class="panel panel-card">
                        <div class="panel-body">
                            <h3 class="m-b-20 m-t-5">Deploy activity</h3>
                            <div class="" ng-if="loadingRecords">
                                <div class="p-t-20 p-b-20">
                                    <div class="loader" style="width: 60px">
                                        <svg class="circular" viewBox="25 25 50 50">
                                            <circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="3"
                                                    stroke-miterlimit="10"/>
                                        </svg>
                                    </div>
                                </div>
                            </div>
                            <div ng-if="!loadingRecords">
                                <div class="streamline b-l" ng-if="records.length">

                                    <div class="sl-item"
                                         ng-class="{
                                         'b-success': r.status == 4,
                                         'b-info': r.status == 2,
                                         'b-danger': r.status == 3,
                                         }"
                                         ng-repeat="r in records">
                                        <div class="sl-content">
                                            <div class="text-muted-dk">
                                                <small>{{r.created_at | amFromUnix | amDateFormat : 'DD MMM\'YY hh:mm a'}}</small>
                                                <small>({{r.created_at | amFromUnix | amTimeAgo}})</small>
                                            </div>
                                            <div class="m-t-5">
                                                <div class="pull-right">
                                                    <span>
                                                        <button class="btn btn-rounded btn-xs btn-danger btn-stroke m-l-5"
                                                                ng-click="errorMessage(r.failed_reason)"
                                                                ng-if="r.failed_reason"
                                                                ng-disabled="startingCloning">SHOW ERROR MESSAGE</button>
                                                        <button class="btn btn-rounded btn-xs btn-danger btn-stroke m-l-5"
                                                                ng-click="startCloning()"
                                                                ng-if="r.status == 3"
                                                                ng-disabled="startingCloning">RETRY</button>
                                                    </span>
                                                </div>
                                                <p>
                                                    <span class="label bg-success" ng-if="r.status == 4">COMPLETE</span>
                                                    <span class="label bg-info" ng-if="r.status == 2">PROCESSING</span>
                                                    <span class="label bg-danger" ng-if="r.status == 3">FAILED</span>
                                                    <span class="label bg-default" ng-if="r.status == 1">NEW</span>

                                                    <span class="">
                                                        <span class="label bg-default">{{utils.recordType(r.type) | uppercase}}</span>
                                                    </span>
                                                </p>
                                            </div>
                                            <pre>{{r}}</pre>
                                            <div class="space5"></div>
                                        </div>
                                    </div>
                                </div>

                                <div class="text-center p-t-60 p-b-70" ng-if="!isCloned && records.length == 0">
                                    <div class="m-b-10">Great!, the project is setup, lets clone the repository</div>
                                    <button class="btn btn-rounded btn-stroke btn-info waves-effect btn-lg"
                                            ng-click="startCloning()"
                                            ng-disabled="startingCloning"
                                            type="button">
                                        {{startingCloning ? "Please wait..":"Start cloning"}}
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>