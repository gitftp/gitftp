<div class="page">
  <div class="header">

    <h2>Servers</h2>
    <div class="btns">
      <!--      <button mat-stroked-button-->
      <!--              color="primary"-->
      <!--              routerLink="/git-accounts/create">Create-->
      <!--      </button>-->
      <button mat-stroked-button
              color="primary"
              type="button"
              [routerLink]="'/project/'+ encode(projectId) + '/server/add'">
        add server
      </button>
    </div>
  </div>
</div>
<div style="padding: 30px"
     *ngIf="gettingServers">
  <mat-spinner diameter="50"></mat-spinner>
</div>
<div class="table2"
     *ngIf="servers.length">
  <table mat-table
         [dataSource]="servers"
         class="mat-elevation-z8">

    <ng-container matColumnDef="server_name">
      <th mat-header-cell
          *matHeaderCellDef>Name
      </th>
      <td mat-cell
          *matCellDef="let element">
        {{element.server_name}}
      </td>
    </ng-container>

    <ng-container matColumnDef="branch">
      <th mat-header-cell
          *matHeaderCellDef>Branch
      </th>
      <td mat-cell
          *matCellDef="let element">
        <ng-icon style="
    font-size: 21px;
    vertical-align: middle;"
                 name="ionGitBranch"></ng-icon>
        {{element.branch}}
      </td>
    </ng-container>
    <ng-container matColumnDef="r">
      <th mat-header-cell
          *matHeaderCellDef>
      </th>
      <td mat-cell
          *matCellDef="let element">
        <mat-icon>arrow_right_alt</mat-icon>
      </td>
    </ng-container>

    <ng-container matColumnDef="type">
      <th mat-header-cell
          *matHeaderCellDef>type
      </th>
      <td mat-cell
          *matCellDef="let element">
        <!--        <mat-icon style="vertical-align: middle;-->
        <!--    margin-top: -4px;">dns-->
        <!--        </mat-icon>-->
        <span class="label">
        {{element.type | uppercase}}
        </span>
      </td>
    </ng-container>
    <ng-container matColumnDef="host">
      <th mat-header-cell
          *matHeaderCellDef>
      </th>
      <td mat-cell
          *matCellDef="let element">
        <span [matTooltip]="element.path">
          {{element.host}}
        </span>
      </td>
    </ng-container>
    <ng-container matColumnDef="auto_deploy">
      <th mat-header-cell
          *matHeaderCellDef>
      </th>
      <td mat-cell
          *matCellDef="let element">
        {{element.auto_deploy == 0 ? '' : 'Auto deploy active'}}
      </td>
    </ng-container>
    <ng-container matColumnDef="revision">
      <th mat-header-cell
          *matHeaderCellDef>Revision
      </th>
      <td mat-cell
          *matCellDef="let element">
        {{element.revision || ''}}
      </td>
    </ng-container>
    <ng-container matColumnDef="action">
      <th mat-header-cell
          *matHeaderCellDef>Action
      </th>
      <td mat-cell
          *matCellDef="let element">
        <button type="button"
                mat-button
                style="margin-right: 7px;"
                color="primary"
                [routerLink]="'/project/' + encode(projectId) + '/server/setup/' + encode(element.server_id)">View setup
        </button>
        <button type="button"
                mat-button
                [routerLink]="'/project/' + encode(projectId) + '/deploy/' + encode(element.server_id)"
                color="primary"
        >

          Deploy
        </button>
      </td>
    </ng-container>

    <tr mat-header-row
        *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row
        *matRowDef="let row; columns: displayedColumns;"></tr>
  </table>
</div>
